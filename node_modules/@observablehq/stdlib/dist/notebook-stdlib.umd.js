!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.observablehq=e.observablehq||{})}(this,function(e){"use strict";const n=new Map,t=new Map,r=[],o=r.map,i=r.some,u=r.hasOwnProperty,l="https://unpkg.com/",a=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/;function c(e){return"string"==typeof e?e:""}function s(e){const n=a.exec(e);return n&&{name:n[1],version:n[2],path:n[3]}}function f(e){const t=`${l}${e.name}@${e.version||"latest"}/package.json`;let r=n.get(t);return r||n.set(t,r=fetch(t).then(e=>{if(!e.ok)throw new Error("unable to load package.json");return e.redirected&&!n.has(e.url)&&n.set(e.url,r),e.json()})),r}const d=m(async function(e,n){if(e.startsWith(l)&&(e=e.substring(l.length)),/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,null==n?location:n).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");const t=s(e);if(!t)return`${l}${e}`;if(!t.version&&null!=n&&n.startsWith(l)){const e=await f(s(n.substring(l.length)));t.version=e.dependencies&&e.dependencies[t.name]||e.peerDependencies&&e.peerDependencies[t.name]}const r=await f(t);return`${l}${r.name}@${r.version}/${t.path||c(r.unpkg)||c(r.browser)||c(r.main)||"index.js"}`});function m(e){const n=u(null);function i(e){let n=t.get(e);return n||t.set(e,n=new Promise((n,t)=>{const o=document.createElement("script");o.onload=(()=>{try{n(r.pop()(u(e)))}catch(e){t(new Error("invalid module"))}o.remove()}),o.onerror=(()=>{t(new Error("unable to load module")),o.remove()}),o.async=!0,o.src=e,window.define=p,document.head.appendChild(o)})),n}function u(n){return t=>Promise.resolve(e(t,n)).then(i)}function l(e){return arguments.length>1?Promise.all(o.call(arguments,n)).then(h):n(e)}return l.resolve=e,l}function h(e){const n={};for(const t of e)for(const e in t)u.call(t,e)&&(null==t[e]?Object.defineProperty(n,e,{get:v(t,e)}):n[e]=t[e]);return n}function v(e,n){return()=>e[n]}function w(e){return e+""=="exports"}function p(e,n,t){const u=arguments.length;u<2?(t=e,n=[]):u<3&&(t=n,n="string"==typeof e?[]:e),r.push(i.call(n,w)?e=>{const r={};return Promise.all(o.call(n,n=>w(n+="")?r:e(n))).then(e=>(t.apply(null,e),r))}:e=>Promise.all(o.call(n,e)).then(e=>"function"==typeof t?t.apply(null,e):t))}function g(e){return function(){return e}}p.amd={};var b={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var x=0;function y(e){this.id=e,this.href=window.location.href+"#"+e}y.prototype.toString=function(){return"url("+this.href+")"};var E={canvas:function(e,n){var t=document.createElement("canvas");return t.width=e,t.height=n,t},context2d:function(e,n,t){null==t&&(t=devicePixelRatio);var r=document.createElement("canvas");r.width=e*t,r.height=n*t,r.style.width=e+"px";var o=r.getContext("2d");return o.scale(t,t),o},download:function(e,n,t){var r=document.createElement("a");return r.appendChild(document.createElement("button")).textContent=null==t?"Download":t,r.download=null==n?"untitled":n,r.onclick=function(){var n=r.href=URL.createObjectURL(e);setTimeout(function(){URL.revokeObjectURL(n)},50)},r},element:function(e,n){var t,r=e+="",o=r.indexOf(":");o>=0&&"xmlns"!==(r=e.slice(0,o))&&(e=e.slice(o+1));var i=b.hasOwnProperty(r)?document.createElementNS(b[r],e):document.createElement(e);if(n)for(var u in n)o=(r=u).indexOf(":"),t=n[u],o>=0&&"xmlns"!==(r=u.slice(0,o))&&(u=u.slice(o+1)),b.hasOwnProperty(r)?i.setAttributeNS(b[r],u,t):i.setAttribute(u,t);return i},input:function(e){var n=document.createElement("input");return null!=e&&(n.type=e),n},range:function(e,n,t){1===arguments.length&&(n=e,e=null);var r=document.createElement("input");return r.min=e=null==e?0:+e,r.max=n=null==n?1:+n,r.step=null==t?"any":t=+t,r.type="range",r},select:function(e){var n=document.createElement("select");return Array.prototype.forEach.call(e,function(e){var t=document.createElement("option");t.value=t.textContent=e,n.appendChild(t)}),n},svg:function(e,n){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("viewBox",[0,0,e,n]),t.setAttribute("width",e),t.setAttribute("height",n),t},text:function(e){return document.createTextNode(e)},uid:function(e){return new y("O-"+(null==e?"":e+"-")+ ++x)}};var k={buffer:function(e){return new Promise(function(n,t){var r=new FileReader;r.onload=function(){n(r.result)},r.onerror=t,r.readAsArrayBuffer(e)})},text:function(e){return new Promise(function(n,t){var r=new FileReader;r.onload=function(){n(r.result)},r.onerror=t,r.readAsText(e)})},url:function(e){return new Promise(function(n,t){var r=new FileReader;r.onload=function(){n(r.result)},r.onerror=t,r.readAsDataURL(e)})}};function P(e,n){let t=!1;return{next:()=>t?{done:!0}:(t=!0,{done:!1,value:e}),return:()=>(t=!0,n(e),{done:!0}),throw:()=>({done:t=!0})}}function L(){return this}function M(e){let n,t,r=!1;const o=e(function(e){t?(t(e),t=null):r=!0;return n=e});return{[Symbol.iterator]:L,throw:()=>({done:!0}),return:()=>(null!=o&&o(),{done:!0}),next:function(){return{done:!1,value:r?(r=!1,Promise.resolve(n)):new Promise(e=>t=e)}}}}function j(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];default:return e.value}}var A={disposable:P,filter:function*(e,n){for(var t,r=-1;!(t=e.next()).done;)n(t.value,++r)&&(yield t.value)},input:function(e){return M(function(n){var t=function(e){switch(e.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change";default:return"input"}}(e),r=j(e);function o(){n(j(e))}return e.addEventListener(t,o),void 0!==r&&n(r),function(){e.removeEventListener(t,o)}})},map:function*(e,n){for(var t,r=-1;!(t=e.next()).done;)yield n(t.value,++r)},observe:M,queue:function(e){let n;const t=[],r=e(function(e){return t.push(e),n&&(n(t.shift()),n=null),e});return{[Symbol.iterator]:L,throw:()=>({done:!0}),return:()=>(null!=r&&r(),{done:!0}),next:function(){return{done:!1,value:t.length?Promise.resolve(t.shift()):new Promise(e=>n=e)}}}},range:function*(e,n,t){e=+e,n=+n,t=(o=arguments.length)<2?(n=e,e=0,1):o<3?1:+t;for(var r=-1,o=0|Math.max(0,Math.ceil((n-e)/t));++r<o;)yield e+r*t},valueAt:function(e,n){if(!(!isFinite(n=+n)||n<0||n!=n|0))for(var t,r=-1;!(t=e.next()).done;)if(++r===n)return t.value},worker:function(e){const n=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),t=new Worker(n);return P(t,()=>{t.terminate(),URL.revokeObjectURL(n)})}};function O(e,n){return function(t){var r,o,i,u,l,a,c,s,f=t[0],d=[],m=null,h=-1;for(l=1,a=arguments.length;l<a;++l){if((r=arguments[l])instanceof Node)d[++h]=r,f+="\x3c!--o:"+h+"--\x3e";else if(Array.isArray(r)){for(c=0,s=r.length;c<s;++c)(o=r[c])instanceof Node?(null===m&&(d[++h]=m=document.createDocumentFragment(),f+="\x3c!--o:"+h+"--\x3e"),m.appendChild(o)):(m=null,f+=o);m=null}else f+=r;f+=t[l]}if(m=e(f),++h>0){for(i=new Array(h),u=document.createTreeWalker(m,NodeFilter.SHOW_COMMENT,null,!1);u.nextNode();)o=u.currentNode,/^o:/.test(o.nodeValue)&&(i[+o.nodeValue.slice(2)]=o);for(l=0;l<h;++l)(o=i[l])&&o.parentNode.replaceChild(d[l],o)}return 1===m.childNodes.length?m.removeChild(m.firstChild):11===m.nodeType?((o=n()).appendChild(m),o):m}}var N=O(function(e){var n=document.createElement("template");return n.innerHTML=e.trim(),document.importNode(n.content,!0)},function(){return document.createElement("div")});function C(e){let n;Object.defineProperties(this,{generator:{value:M(e=>void(n=e))},value:{get:()=>e,set:t=>n(e=t)}}),void 0!==e&&n(e)}function*R(){for(;;)yield Date.now()}var S=new Map;function $(e,n){var t;return(t=S.get(e=+e))?t.then(g(n)):(t=Date.now())>=e?Promise.resolve(n):function(e,n){var t=new Promise(function(t){S.delete(n);var r=n-e;if(!(r>0))throw new Error("invalid time");if(r>2147483647)throw new Error("too long to wait");setTimeout(t,r)});return S.set(n,t),t}(t,e).then(g(n))}var T={delay:function(e,n){return new Promise(function(t){setTimeout(function(){t(n)},e)})},tick:function(e,n){return $(Math.ceil((Date.now()+1)/e)*e,n)},when:$};function U(e,n){if(/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,null==n?location:n).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");return"https://unpkg.com/"+e}var D=O(function(e){var n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.innerHTML=e.trim(),n},function(){return document.createElementNS("http://www.w3.org/2000/svg","g")}),F=String.raw;function W(e){return new Promise(function(n,t){var r=document.createElement("link");r.rel="stylesheet",r.href=e,r.onerror=t,r.onload=n,document.head.appendChild(r)})}var q=28;function _(){return M(function(e){var n=e(window.innerWidth-q);function t(){var t=window.innerWidth-q;t!==n&&e(n=t)}return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}})}e.Library=function(e){var n=null==e?d:m(e);Object.defineProperties(this,{DOM:{value:E,enumerable:!0},Files:{value:k,enumerable:!0},Generators:{value:A,enumerable:!0},html:{value:g(N),enumerable:!0},md:{value:function(e){return function(){return e("marked@0.3.12/marked.min.js").then(function(n){return O(function(t){var r=document.createElement("div");r.innerHTML=n(t,{langPrefix:""}).trim();var o=r.querySelectorAll("pre code[class]");return o.length>0&&e("@observablehq/highlight.js@1.0.0/highlight.min.js").then(function(e){o.forEach(e.highlightBlock)}),r},function(){return document.createElement("div")})})}}(n),enumerable:!0},Mutable:{value:g(C),enumerable:!0},now:{value:R,enumerable:!0},Promises:{value:T,enumerable:!0},require:{value:g(n),enumerable:!0},resolve:{value:g(U),enumerable:!0},svg:{value:g(D),enumerable:!0},tex:{value:function(e){return function(){return Promise.all([e("katex@0.9.0/dist/katex.min.js"),e.resolve("katex@0.9.0/dist/katex.min.css").then(W)]).then(function(e){var n=e[0],t=r();function r(e){return function(){var t=document.createElement("div");return n.render(F.apply(String,arguments),t,e),t.removeChild(t.firstChild)}}return t.block=r({displayMode:!0}),t})}}(n),enumerable:!0},width:{value:_,enumerable:!0}})},Object.defineProperty(e,"__esModule",{value:!0})});
